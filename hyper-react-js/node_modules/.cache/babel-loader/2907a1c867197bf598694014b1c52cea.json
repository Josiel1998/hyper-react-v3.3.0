{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josieldelgadillo/GitHub_M1/GitHub/hyper-react-v3.3.0/hyper-react-js/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";var _marked=/*#__PURE__*/_regeneratorRuntime().mark(login),_marked2=/*#__PURE__*/_regeneratorRuntime().mark(logout),_marked3=/*#__PURE__*/_regeneratorRuntime().mark(signup),_marked4=/*#__PURE__*/_regeneratorRuntime().mark(forgotPassword),_marked5=/*#__PURE__*/_regeneratorRuntime().mark(forgotPasswordChange),_marked6=/*#__PURE__*/_regeneratorRuntime().mark(watchLoginUser),_marked7=/*#__PURE__*/_regeneratorRuntime().mark(watchLogout),_marked8=/*#__PURE__*/_regeneratorRuntime().mark(watchSignup),_marked9=/*#__PURE__*/_regeneratorRuntime().mark(watchForgotPassword),_marked10=/*#__PURE__*/_regeneratorRuntime().mark(watchForgotPasswordChange),_marked11=/*#__PURE__*/_regeneratorRuntime().mark(authSaga);import{all,fork,put,takeEvery,call}from'redux-saga/effects';import{login as loginApi,logout as logoutApi,signup as signupApi,forgotPassword as forgotPasswordApi,forgotPasswordConfirm}from'../../helpers/';import{APICore,setAuthorization}from'../../helpers/api/apiCore';import{authApiResponseSuccess,authApiResponseError}from'./actions';import{AuthActionTypes}from'./constants';var api=new APICore();/**\n * Login the user\n * @param {*} payload - username and password\n */function login(_ref){var _ref$payload,username,password,response,user;return _regeneratorRuntime().wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:_ref$payload=_ref.payload,username=_ref$payload.username,password=_ref$payload.password;_context.prev=1;_context.next=4;return call(loginApi,{username:username,password:password});case 4:response=_context.sent;user=response.data;// NOTE - You can change this according to response format from your api\napi.setLoggedInUser(user);setAuthorization(user['token']);_context.next=10;return put(authApiResponseSuccess(AuthActionTypes.LOGIN_USER,user));case 10:_context.next=18;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);_context.next=16;return put(authApiResponseError(AuthActionTypes.LOGIN_USER,_context.t0));case 16:api.setLoggedInUser(null);setAuthorization(null);case 18:case\"end\":return _context.stop();}}},_marked,null,[[1,12]]);}/**\n * Logout the user\n */function logout(){return _regeneratorRuntime().wrap(function logout$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return call(logoutApi);case 3:api.setLoggedInUser(null);setAuthorization(null);_context2.next=7;return put(authApiResponseSuccess(AuthActionTypes.LOGOUT_USER,{}));case 7:_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);_context2.next=13;return put(authApiResponseError(AuthActionTypes.LOGOUT_USER,_context2.t0));case 13:case\"end\":return _context2.stop();}}},_marked2,null,[[0,9]]);}function signup(_ref2){var _ref2$payload,fullname,email,password,response,user;return _regeneratorRuntime().wrap(function signup$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref2$payload=_ref2.payload,fullname=_ref2$payload.fullname,email=_ref2$payload.email,password=_ref2$payload.password;_context3.prev=1;_context3.next=4;return call(signupApi,{fullname:fullname,email:email,password:password});case 4:response=_context3.sent;user=response.data;// api.setLoggedInUser(user);\n// setAuthorization(user['token']);\n_context3.next=8;return put(authApiResponseSuccess(AuthActionTypes.SIGNUP_USER,user));case 8:_context3.next=16;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);_context3.next=14;return put(authApiResponseError(AuthActionTypes.SIGNUP_USER,_context3.t0));case 14:api.setLoggedInUser(null);setAuthorization(null);case 16:case\"end\":return _context3.stop();}}},_marked3,null,[[1,10]]);}function forgotPassword(_ref3){var username,response;return _regeneratorRuntime().wrap(function forgotPassword$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:username=_ref3.payload.username;_context4.prev=1;_context4.next=4;return call(forgotPasswordApi,{username:username});case 4:response=_context4.sent;_context4.next=7;return put(authApiResponseSuccess(AuthActionTypes.FORGOT_PASSWORD,response.data));case 7:_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);_context4.next=13;return put(authApiResponseError(AuthActionTypes.FORGOT_PASSWORD,_context4.t0));case 13:case\"end\":return _context4.stop();}}},_marked4,null,[[1,9]]);}function forgotPasswordChange(_ref4){var data,response;return _regeneratorRuntime().wrap(function forgotPasswordChange$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:data=_ref4.payload.data;_context5.prev=1;_context5.next=4;return call(forgotPasswordConfirm,data);case 4:response=_context5.sent;_context5.next=7;return put(authApiResponseSuccess(AuthActionTypes.FORGOT_PASSWORD_CHANGE,response.data));case 7:_context5.next=13;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](1);_context5.next=13;return put(authApiResponseError(AuthActionTypes.FORGOT_PASSWORD_CHANGE,_context5.t0));case 13:case\"end\":return _context5.stop();}}},_marked5,null,[[1,9]]);}export function watchLoginUser(){return _regeneratorRuntime().wrap(function watchLoginUser$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return takeEvery(AuthActionTypes.LOGIN_USER,login);case 2:case\"end\":return _context6.stop();}}},_marked6);}export function watchLogout(){return _regeneratorRuntime().wrap(function watchLogout$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return takeEvery(AuthActionTypes.LOGOUT_USER,logout);case 2:case\"end\":return _context7.stop();}}},_marked7);}export function watchSignup(){return _regeneratorRuntime().wrap(function watchSignup$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return takeEvery(AuthActionTypes.SIGNUP_USER,signup);case 2:case\"end\":return _context8.stop();}}},_marked8);}export function watchForgotPassword(){return _regeneratorRuntime().wrap(function watchForgotPassword$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return takeEvery(AuthActionTypes.FORGOT_PASSWORD,forgotPassword);case 2:case\"end\":return _context9.stop();}}},_marked9);}export function watchForgotPasswordChange(){return _regeneratorRuntime().wrap(function watchForgotPasswordChange$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return takeEvery(AuthActionTypes.FORGOT_PASSWORD_CHANGE,forgotPasswordChange);case 2:case\"end\":return _context10.stop();}}},_marked10);}function authSaga(){return _regeneratorRuntime().wrap(function authSaga$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return all([fork(watchLoginUser),fork(watchLogout),fork(watchSignup),fork(watchForgotPassword),fork(watchForgotPasswordChange)]);case 2:case\"end\":return _context11.stop();}}},_marked11);}export default authSaga;","map":{"version":3,"names":["login","logout","signup","forgotPassword","forgotPasswordChange","watchLoginUser","watchLogout","watchSignup","watchForgotPassword","watchForgotPasswordChange","authSaga","all","fork","put","takeEvery","call","loginApi","logoutApi","signupApi","forgotPasswordApi","forgotPasswordConfirm","APICore","setAuthorization","authApiResponseSuccess","authApiResponseError","AuthActionTypes","api","payload","username","password","response","user","data","setLoggedInUser","LOGIN_USER","LOGOUT_USER","fullname","email","SIGNUP_USER","FORGOT_PASSWORD","FORGOT_PASSWORD_CHANGE"],"sources":["/Users/josieldelgadillo/GitHub_M1/GitHub/hyper-react-v3.3.0/hyper-react-js/src/redux/auth/saga.js"],"sourcesContent":["// @flow\nimport { all, fork, put, takeEvery, call } from 'redux-saga/effects';\n\nimport {\n    login as loginApi,\n    logout as logoutApi,\n    signup as signupApi,\n    forgotPassword as forgotPasswordApi,\n    forgotPasswordConfirm,\n} from '../../helpers/';\n\nimport { APICore, setAuthorization } from '../../helpers/api/apiCore';\nimport { authApiResponseSuccess, authApiResponseError } from './actions';\nimport { AuthActionTypes } from './constants';\n\nconst api = new APICore();\n\n/**\n * Login the user\n * @param {*} payload - username and password\n */\nfunction* login({ payload: { username, password } }) {\n    try {\n        const response = yield call(loginApi, { username, password });\n        const user = response.data;\n        // NOTE - You can change this according to response format from your api\n        api.setLoggedInUser(user);\n        setAuthorization(user['token']);\n        yield put(authApiResponseSuccess(AuthActionTypes.LOGIN_USER, user));\n    } catch (error) {\n        yield put(authApiResponseError(AuthActionTypes.LOGIN_USER, error));\n        api.setLoggedInUser(null);\n        setAuthorization(null);\n    }\n}\n\n/**\n * Logout the user\n */\nfunction* logout() {\n    try {\n        yield call(logoutApi);\n        api.setLoggedInUser(null);\n        setAuthorization(null);\n        yield put(authApiResponseSuccess(AuthActionTypes.LOGOUT_USER, {}));\n    } catch (error) {\n        yield put(authApiResponseError(AuthActionTypes.LOGOUT_USER, error));\n    }\n}\n\nfunction* signup({ payload: { fullname, email, password } }) {\n    try {\n        const response = yield call(signupApi, { fullname, email, password });\n        const user = response.data;\n        // api.setLoggedInUser(user);\n        // setAuthorization(user['token']);\n        yield put(authApiResponseSuccess(AuthActionTypes.SIGNUP_USER, user));\n    } catch (error) {\n        yield put(authApiResponseError(AuthActionTypes.SIGNUP_USER, error));\n        api.setLoggedInUser(null);\n        setAuthorization(null);\n    }\n}\n\nfunction* forgotPassword({ payload: { username } }) {\n    try {\n        const response = yield call(forgotPasswordApi, { username });\n        yield put(authApiResponseSuccess(AuthActionTypes.FORGOT_PASSWORD, response.data));\n    } catch (error) {\n        yield put(authApiResponseError(AuthActionTypes.FORGOT_PASSWORD, error));\n    }\n}\n\nfunction* forgotPasswordChange({ payload: { data } }) {\n    try {\n        const response = yield call(forgotPasswordConfirm, data);\n        yield put(authApiResponseSuccess(AuthActionTypes.FORGOT_PASSWORD_CHANGE, response.data));\n    } catch (error) {\n        yield put(authApiResponseError(AuthActionTypes.FORGOT_PASSWORD_CHANGE, error));\n    }\n}\n\nexport function* watchLoginUser(): any {\n    yield takeEvery(AuthActionTypes.LOGIN_USER, login);\n}\n\nexport function* watchLogout(): any {\n    yield takeEvery(AuthActionTypes.LOGOUT_USER, logout);\n}\n\nexport function* watchSignup(): any {\n    yield takeEvery(AuthActionTypes.SIGNUP_USER, signup);\n}\n\nexport function* watchForgotPassword(): any {\n    yield takeEvery(AuthActionTypes.FORGOT_PASSWORD, forgotPassword);\n}\n\nexport function* watchForgotPasswordChange(): any {\n    yield takeEvery(AuthActionTypes.FORGOT_PASSWORD_CHANGE, forgotPasswordChange);\n}\n\nfunction* authSaga(): any {\n    yield all([\n        fork(watchLoginUser),\n        fork(watchLogout),\n        fork(watchSignup),\n        fork(watchForgotPassword),\n        fork(watchForgotPasswordChange),\n    ]);\n}\n\nexport default authSaga;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}